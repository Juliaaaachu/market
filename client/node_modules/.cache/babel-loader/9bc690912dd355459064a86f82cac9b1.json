{"ast":null,"code":"'use strict';\n/*!\n * ignore\n */\n\nmodule.exports = function cleanModifiedSubpaths(doc, path, options) {\n  options = options || {};\n  const skipDocArrays = options.skipDocArrays;\n  let deleted = 0;\n\n  if (!doc) {\n    return deleted;\n  }\n\n  for (const modifiedPath of Object.keys(doc.$__.activePaths.states.modify)) {\n    if (skipDocArrays) {\n      const schemaType = doc.schema.path(modifiedPath);\n\n      if (schemaType && schemaType.$isMongooseDocumentArray) {\n        continue;\n      }\n    }\n\n    if (modifiedPath.startsWith(path + '.')) {\n      delete doc.$__.activePaths.states.modify[modifiedPath];\n      ++deleted;\n    }\n  }\n\n  return deleted;\n};","map":{"version":3,"names":["module","exports","cleanModifiedSubpaths","doc","path","options","skipDocArrays","deleted","modifiedPath","Object","keys","$__","activePaths","states","modify","schemaType","schema","$isMongooseDocumentArray","startsWith"],"sources":["/Users/juliachu/Dropbox/CS/market/node_modules/mongoose/lib/helpers/document/cleanModifiedSubpaths.js"],"sourcesContent":["'use strict';\n\n/*!\n * ignore\n */\n\nmodule.exports = function cleanModifiedSubpaths(doc, path, options) {\n  options = options || {};\n  const skipDocArrays = options.skipDocArrays;\n\n  let deleted = 0;\n  if (!doc) {\n    return deleted;\n  }\n  for (const modifiedPath of Object.keys(doc.$__.activePaths.states.modify)) {\n    if (skipDocArrays) {\n      const schemaType = doc.schema.path(modifiedPath);\n      if (schemaType && schemaType.$isMongooseDocumentArray) {\n        continue;\n      }\n    }\n    if (modifiedPath.startsWith(path + '.')) {\n      delete doc.$__.activePaths.states.modify[modifiedPath];\n      ++deleted;\n    }\n  }\n  return deleted;\n};\n"],"mappings":"AAAA;AAEA;AACA;AACA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,qBAAT,CAA+BC,GAA/B,EAAoCC,IAApC,EAA0CC,OAA1C,EAAmD;EAClEA,OAAO,GAAGA,OAAO,IAAI,EAArB;EACA,MAAMC,aAAa,GAAGD,OAAO,CAACC,aAA9B;EAEA,IAAIC,OAAO,GAAG,CAAd;;EACA,IAAI,CAACJ,GAAL,EAAU;IACR,OAAOI,OAAP;EACD;;EACD,KAAK,MAAMC,YAAX,IAA2BC,MAAM,CAACC,IAAP,CAAYP,GAAG,CAACQ,GAAJ,CAAQC,WAAR,CAAoBC,MAApB,CAA2BC,MAAvC,CAA3B,EAA2E;IACzE,IAAIR,aAAJ,EAAmB;MACjB,MAAMS,UAAU,GAAGZ,GAAG,CAACa,MAAJ,CAAWZ,IAAX,CAAgBI,YAAhB,CAAnB;;MACA,IAAIO,UAAU,IAAIA,UAAU,CAACE,wBAA7B,EAAuD;QACrD;MACD;IACF;;IACD,IAAIT,YAAY,CAACU,UAAb,CAAwBd,IAAI,GAAG,GAA/B,CAAJ,EAAyC;MACvC,OAAOD,GAAG,CAACQ,GAAJ,CAAQC,WAAR,CAAoBC,MAApB,CAA2BC,MAA3B,CAAkCN,YAAlC,CAAP;MACA,EAAED,OAAF;IACD;EACF;;EACD,OAAOA,OAAP;AACD,CArBD"},"metadata":{},"sourceType":"script"}